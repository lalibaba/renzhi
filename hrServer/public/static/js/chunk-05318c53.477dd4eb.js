(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05318c53"],{"01f5":function(e,t,a){"use strict";t["a"]={hireType:[{id:1,value:"正式"},{id:2,value:"非正式"}],subjection:[{id:"1",value:"总部"},{id:"2",value:"分城市"}],workingState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],leaveType:[{id:"1",value:"主动离职"},{id:"2",value:"被动离职"},{id:"3",value:"退休"}],attritionMonth:[{id:"1",value:"离职日本月"},{id:"2",value:"离职日次月"}],informaltype:[{id:"2",value:"实习"},{id:"3",value:"劳务"},{id:"4",value:"顾问"},{id:"5",value:"返聘"},{id:"6",value:"外包"}],highestDegree:[{id:"1",value:"初中"},{id:"2",value:"高中"},{id:"3",value:"中专"},{id:"4",value:"大专"},{id:"5",value:"本科"},{id:"6",value:"硕士"},{id:"7",value:"博士"},{id:"8",value:"其他"}],isOverseas:[{id:"1",value:"中国大陆"},{id:"2",value:"港澳台国外"}],gender:[{id:"1",value:"男"},{id:"2",value:"女"}],maritaStatus:[{id:"1",value:"未婚"},{id:"2",value:"已婚"},{id:"3",value:"离异"}],animalSymbol:[{id:"1",value:"鼠"},{id:"2",value:"牛"},{id:"3",value:"虎"},{id:"4",value:"兔"},{id:"5",value:"龙"},{id:"6",value:"蛇"},{id:"7",value:"马"},{id:"8",value:"羊"},{id:"9",value:"猴"},{id:"10",value:"鸡"},{id:"11",value:"狗"},{id:"12",value:"猪"}],constellation:[{code:1,value:"水瓶座"},{code:2,value:"双鱼座"},{code:3,value:"白羊座"},{code:4,value:"金牛座"},{code:5,value:"双子座"},{code:6,value:"巨蟹座"},{code:7,value:"狮子座"},{code:8,value:"处女座"},{code:9,value:"天秤座"},{code:10,value:"天蝎座"},{code:11,value:"射手座"},{code:12,value:"摩羯座"}],bloodType:[{id:"1",value:"A型"},{id:"2",value:"B型"},{id:"3",value:"O型"},{id:"4",value:"AB型"}],educationType:[{id:"1",value:"统招"},{id:"2",value:"自考"},{id:"3",value:"成考"}],positiveType:[{id:"1",value:"已转正"},{id:"2",value:"未转正"}],contractPeriod:[{id:"1",value:"6月"},{id:"2",value:"12月"},{id:"3",value:"24月"},{id:"4",value:"36月"},{id:"5",value:"其他"}],renewalCount:[{id:1,value:"0次"},{id:2,value:"1次"},{id:3,value:"2次"},{id:4,value:"3次"},{id:5,value:"4次或以上"}],resumeSource:[{id:"1",value:"智联招聘"},{id:"2",value:"拉勾网"},{id:"3",value:"前程无忧"},{id:"4",value:"猎聘网"},{id:"5",value:"校园宣讲"},{id:"6",value:"猎头"},{id:"7",value:"内部推荐"}],hireSourceType:[{id:"1",value:"社招"},{id:"2",value:"校招"}],departments:[{id:"1",value:"总裁办"},{id:"2",value:"研究院"}],stausInfos:[{id:"1",value:"在职"},{id:"2",value:"入职"},{id:"3",value:"离职"}]}},"0b62":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("PageTools",{attrs:{type:"info"},scopedSlots:e._u([{key:"before",fn:function(){return[r("span",[e._v("共"+e._s(e.total)+"条记录")])]},proxy:!0},{key:"after",fn:function(){return[r("el-button",{attrs:{disabled:!e.checkPermission("EMPLOYEES_EXPORT_ENTRY"),size:"small",type:"warning"},on:{click:function(t){return e.$router.push("/import?type=user")}}},[e._v("导入 ")]),r("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.exportData}},[e._v("导出")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.add}},[e._v("新增员工")])]},proxy:!0}])}),r("el-card",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.list}},[r("el-table-column",{attrs:{label:"序号",sortable:"",width:"80",type:"index"}}),r("el-table-column",{attrs:{label:"姓名",sortable:"",prop:"username"}}),r("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[r("img",{directives:[{name:"imgerror",rawName:"v-imgerror",value:a("bae5"),expression:"require('@/assets/common/bigUserHeader.png')"}],staticStyle:{"border-radius":"50%",width:"80px",height:"80px"},attrs:{src:l.staffPhoto,alt:"头像"},on:{click:function(t){return e.showQrCode(l.staffPhoto)}}})]}}])}),r("el-table-column",{attrs:{label:"工号",sortable:"",prop:"workNumber"}}),r("el-table-column",{attrs:{label:"聘用形式",sortable:"",prop:"formOfEmployment",formatter:e.formatterFn}}),r("el-table-column",{attrs:{label:"部门",sortable:"",prop:"departmentName"}}),r("el-table-column",{attrs:{label:"入职时间",sortable:"",prop:"timeOfEntry "},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatDate")(t.row.timeOfEntry))+" ")]}}])}),r("el-table-column",{attrs:{label:"账户状态",sortable:"",prop:"enableState"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[r("el-switch",{attrs:{value:1===t.enableState}})]}}])}),r("el-table-column",{attrs:{label:"操作",sortable:"",fixed:"right",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$router.push("/employees/detail/"+a.id)}}},[e._v("查看")]),r("el-button",{attrs:{type:"text",size:"small"}},[e._v("转正")]),r("el-button",{attrs:{type:"text",size:"small"}},[e._v("调岗")]),r("el-button",{attrs:{type:"text",size:"small"}},[e._v("离职")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.asRole(a.id)}}},[e._v("角色")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delEmployee(a.id)}}},[e._v("删除")])]}}])})],1),r("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"end",align:"middle"}},[e.total>0?r("el-pagination",{attrs:{"current-page":e.page.page,"page-size":e.page.size,"page-sizes":[10,20,30,40,50],background:!0,total:e.total,layout:"total,prev, pager, next,sizes"},on:{"update:currentPage":function(t){return e.$set(e.page,"page",t)},"update:current-page":function(t){return e.$set(e.page,"page",t)},"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"size-change":e.getEmployeeList,"current-change":e.getEmployeeList}}):e._e()],1)],1),r("addEmployee",{attrs:{"show-dialog":e.showDialog},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t},refresh:e.getEmployeeList}}),r("el-dialog",{attrs:{width:"50%",title:"二维码",visible:e.showCodeDialog},on:{"update:visible":function(t){e.showCodeDialog=t}}},[r("el-row",{attrs:{type:"flex",justify:"space-between"}},[r("el-col",[r("canvas",{ref:"myCanvas"})]),r("el-col",[r("img",{directives:[{name:"imgerror",rawName:"v-imgerror",value:a("bae5"),expression:"require('@/assets/common/bigUserHeader.png')"}],staticStyle:{width:"200px"},attrs:{src:e.imgUrl,alt:""}})])],1)],1),r("assignRole",{ref:"assignRole",attrs:{userid:e.currentUserId},model:{value:e.roleVisible,callback:function(t){e.roleVisible=t},expression:"roleVisible"}})],1)},l=[],n=a("c7eb"),o=a("1da1"),i=(a("d3b7"),a("3ca3"),a("ddb0"),a("b64b"),a("d81d"),a("7db0"),a("365c")),s=a("01f5"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增员工",visible:e.showDialog,"before-close":e.handleClose},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnOK}},[e._v("确定")])],1)],1)]},proxy:!0}])},[a("el-form",{ref:"Form",attrs:{"label-width":"120px",model:e.formData,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入姓名"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入手机号"},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),a("el-form-item",{attrs:{label:"入职时间",prop:"timeOfEntry"}},[a("el-date-picker",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择入职时间"},model:{value:e.formData.timeOfEntry,callback:function(t){e.$set(e.formData,"timeOfEntry",t)},expression:"formData.timeOfEntry"}})],1),a("el-form-item",{attrs:{label:"聘用形式",prop:"formOfEmployment"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},model:{value:e.formData.formOfEmployment,callback:function(t){e.$set(e.formData,"formOfEmployment",t)},expression:"formData.formOfEmployment"}},e._l(e.hireType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"工号",prop:"workNumber"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入工号"},model:{value:e.formData.workNumber,callback:function(t){e.$set(e.formData,"workNumber",t)},expression:"formData.workNumber"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择部门"},on:{focus:e.getDepartments},model:{value:e.formData.departmentName,callback:function(t){e.$set(e.formData,"departmentName",t)},expression:"formData.departmentName"}}),e.showTree?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"default-expand-all":!0,data:e.treeData,props:{label:"name"}},on:{"node-click":e.closeTree}}):e._e()],1),a("el-form-item",{attrs:{label:"转正时间",prop:"correctionTime"}},[a("el-date-picker",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择转正时间"},model:{value:e.formData.correctionTime,callback:function(t){e.$set(e.formData,"correctionTime",t)},expression:"formData.correctionTime"}})],1)],1)],1)},c=[],d=(a("b0c0"),a("ed08")),m={name:"AddEmployee",props:{showDialog:{type:Boolean,default:!1}},data:function(){return{showTree:!1,loading:!1,treeData:[],hireType:s["a"].hireType,formData:{username:"老六",mobile:"18279874561",timeOfEntry:"2022/12/22",formOfEmployment:"正式",workNumber:"13589",departmentName:"总裁办",correctionTime:"2022/12/22"},rules:{username:[{required:!0,message:"姓名必填",trigger:"blur"},{min:1,max:4,message:"用户姓名为1-4位"}],mobile:[{required:!0,message:"电话必填",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],timeOfEntry:[{required:!0,message:"入职时间必填",trigger:"blur"}],formOfEmployment:[{required:!0,message:"聘用形式必填",trigger:"change"}],workNumber:[{required:!0,message:"工号必填",trigger:"blur"}],departmentName:[{required:!0,message:"部门必填",trigger:"change"}]}}},methods:{btnOK:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.Form.validate();case 3:return t.next=5,Object(i["b"])(e.formData);case 5:e.$message.success("新增成功"),e.$emit("refresh"),e.$parent.getEmployeeList(),e.handleClose(),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()},handleClose:function(){this.$emit("update:showDialog",!1),this.showTree=!1,this.$refs.Form.resetFields(),this.formData={username:"",mobile:"",timeOfEntry:"",formOfEmployment:"",workNumber:"",departmentName:"",correctionTime:""}},getDepartments:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showTree=!0,e.loading=!0,t.next=4,Object(i["l"])();case 4:a=t.sent,r=a.depts,e.treeData=Object(d["a"])(r,""),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},closeTree:function(e){this.formData.departmentName=e.name,this.showTree=!1}}},p=m,f=a("2877"),v=Object(f["a"])(p,u,c,!1,null,null,null),b=v.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"分配角色",visible:e.value,"before-close":e.handleClose}},[a("el-checkbox-group",{model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},e._l(e.roleList,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name)+" ")])})),1),a("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnOk}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)},g=[],y={name:"HrsaasAssignRole",components:{},props:{value:{type:Boolean,default:!1}},data:function(){return{roleIds:[],roleList:[],loading:!1}},watch:{value:function(e){e&&this.getUserDetailById()}},created:function(){},methods:{btnOk:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(i["f"])({id:e.$attrs["userid"],roleIds:e.roleIds});case 4:e.$message.success("更新成功"),e.handleClose(),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:return t.prev=10,e.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,8,10,13]])})))()},handleClose:function(){this.$emit("input",!1),this.roleIds=[]},getRoleList:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["q"])();case 2:a=t.sent,r=a.rows,e.roleList=r;case 5:case"end":return t.stop()}}),t)})))()},getUserDetailById:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["r"])(e.$attrs["userid"]);case 2:a=t.sent,r=a.roleIds,e.roleIds=r||[];case 5:case"end":return t.stop()}}),t)})))()}}},w=y,x=Object(f["a"])(w,h,g,!1,null,null,null),O=x.exports,k=a("8975"),D=a("d055"),j=a.n(D),E={name:"Hrsaas1Index",components:{addEmployee:b,assignRole:O},data:function(){return{roleVisible:!1,loading:!1,page:{page:1,size:10},list:[],total:0,showDialog:!1,showCodeDialog:!1,previewShow:!1,imgUrl:"",currentUserId:""}},mounted:function(){this.getEmployeeList()},methods:{asRole:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.currentUserId=e,a.next=3,t.$refs.assignRole.getRoleList();case 3:t.roleVisible=!0;case 4:case"end":return a.stop()}}),a)})))()},showQrCode:function(e){var t=this;this.imgUrl=e,e?(this.showCodeDialog=!0,this.$nextTick((function(){j.a.toCanvas(t.$refs.myCanvas,e)}))):this.$message.warning("该用户还未上传头像")},getEmployeeList:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a,r,l;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(i["m"])(e.page);case 4:a=t.sent,r=a.rows,l=a.total,e.list=r,e.total=l,0!==e.total&&0===r.length&&(e.page.page=e.page.page-1,e.getEmployeeList()),t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](0);case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,12,14,17]])})))()},exportData:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var r,l,o,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["m"])({page:1,size:10});case 2:r=t.sent,l=r.rows,o={"姓名":"username","手机号":"mobile","入职日期":"timeOfEntry","聘用形式":"formOfEmployment","转正日期":"correctionTime","工号":"workNumber","部门":"departmentName"},s=e.fromJson(o,l),Promise.all([a.e("chunk-1bfe6e6a"),a.e("chunk-2d22a197")]).then(a.bind(null,"dfed")).then((function(e){e.export_json_to_excel({header:Object.keys(o),data:s,filename:"导出的员工名单",autoWidth:!0,bookType:"xlsx",multiHeader:[["姓名","主要信息","","","","",""]],merges:["A1:A2","B1:G1"]})}));case 7:case"end":return t.stop()}}),t)})))()},fromJson:function(e,t){var a=this;return t.map((function(t){return Object.keys(e).map((function(r){return"formOfEmployment"===e[r]?a.formatterFn(null,null,t[e[r]]):"timeOfEntry"===e[r]||"correctionTime"===e[r]?Object(k["formatDate"])(t[e[r]]):t[e[r]]}))}))},formatterFn:function(e,t,a,r){var l=s["a"].hireType.find((function(e){return e.id===1*a}));return l?l.value:"非正式"},add:function(){this.showDialog=!0},delEmployee:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("是否删除员工","提示",{type:"warning"});case 3:return a.next=5,Object(i["h"])(e);case 5:return t.$message.success("删除成功"),a.next=8,t.getEmployeeList();case 8:a.next=12;break;case 10:a.prev=10,a.t0=a["catch"](0);case 12:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}},_=E,$=Object(f["a"])(_,r,l,!1,null,"f34746e4",null);t["default"]=$.exports},bae5:function(e,t,a){e.exports=a.p+"static/img/bigUserHeader.fda3837f.png"},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("53ca"),a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("d3b7"),a("4d90"),a("1276"),a("159b");function r(e,t){var a=[];return e.forEach((function(l){if(l.pid===t){var n=r(e,l.id);n.length>0&&(l.children=n),a.push(l)}})),a}}}]);